<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="bootstrap-5.0.2-dist/css/bootstrap.min.css"
	rel="stylesheet">
<link href="web.css" rel="stylesheet">
<link href="fontawesome/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
	<script src="jquery-3.5.1.min.js"></script>
	<script src="bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
    <script src="web.js"></script>
	<div id="wrap" class="m-3">
        <div class="mb-3" id="alerts"></div>
		<div id="main" class="container clear-top">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h3 data-i18n="updateAvailable">Update Available</h3>
					</div>
				</div>
                <div class="row mt-3">
                    <div class="col-md-12">
                        <i class="fa fa-cloud-download text-success fa-3x align-middle"></i>&nbsp;<small class="align-middle" data-content="availableVersion">Available Version</small>
                    </div> 
                </div>
                <div class="row mt-3">
					<div class="col-md-12">
						<button id="startUpdate" type="button" class="btn btn-primary" data-i18n="update">Update</button>&nbsp;
						<a id="deferUpdate" data-i18n="deferUpdate">Not now</a>
					</div>
				</div>
			</div>
		</div>
	</div>


    <script type="text/javascript">
        function uiReady() {
            $('#deferUpdate').off('click').on('click', function(event) {
            	bridge.deferUpdate();
            });
            $('#startUpdate').off('click').on('click', function(event) {
                try {
                	alert('x1');
                    $('#startUpdate').buttonLoader('start');
                    alert('x2');
                    $('#alerts').empty();
                    alert('x3');
                    bridge.update();
                    alert('x4');
                } catch (e) {
                    alert('x5 ' + e);
                    $('#startUpdate').buttonLoader('stop');
                    $('#alerts').append($('<div class="alert alert-danger">' + e.getMessage() + '</div>'));
                }
                event.preventDefault();
            });
        };
    </script>
</body>
</html>
